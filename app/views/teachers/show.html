{% extends "layouts/main.html" %}

{% set name = teacher.firstName + ' ' + teacher.lastName %}

{% set title = name %}

{% block beforeContent %}
  {{ govukBreadcrumbs({
    items: [
      {
        text: 'Teachers',
        href: '/teachers'
      },
      {
        text: name
      }
    ]
  }) }}
{% endblock %}

{% block content %}

  {{ govukNotificationBanner({
    html: "<h2 class=\"govuk-heading-m\">"+flash+"</h2>",
    type: "success",
    icon: false
  }) if flash and flash.length }}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds-from-desktop">
      <h1 class="govuk-heading-l">
        {{title}}
        {{ govukTag({
          text: teacher.status,
          classes: teacher.status | statusClass
        }) }}
      </h1>

      {% if user.organisation.name == teacher.organisation.name %}
        <p class="govuk-!-margin-bottom-7"><a href="/teachers/{{teacher.id}}/remove">Remove from your organisation</a></p>
      {% else %}
        <p class="govuk-!-margin-bottom-7"><a href="/teachers/{{teacher.id}}/add">Add to your organisation</a></p>
      {% endif %}

      <h2 class="govuk-heading-m">
        Personal details
      </h2>

      {{ govukSummaryList({
        classes: 'govuk-!-margin-bottom-9',
        rows: [
          {
            key: {
              text: "Teacher reference number (TRN)"
            },
            value: {
              text: teacher.trn
            }
          },
          {
            key: {
              text: "Email address"
            },
            value: {
              text: teacher.emailAddress
            }
          }
        ]
      }) }}

      {% if teacher.organisation %}

        <h2 class="govuk-heading-m">
          Organisation details
        </h2>

        {% set address %}
          <p>{{teacher.organisation.address.address1}},<br>
          {{teacher.organisation.address.town}},<br>
          {{teacher.organisation.address.postcode}}</p>
        {% endset %}

        {{ govukSummaryList({
          classes: 'govuk-!-margin-bottom-9',
          rows: [
            {
              key: {
                text: "Employer ID"
              },
              value: {
                text: teacher.organisation.id
              }
            },
            {
              key: {
                text: "Employer name"
              },
              value: {
                text: teacher.organisation.name
              }
            },
            {
              key: {
                text: "Employment address"
              },
              value: {
                html: address
              }
            }
          ]
        }) }}
      {% endif %}

      <h2 class="govuk-heading-m">
        Qualified teacher status (QTS)
      </h2>

      {{ govukSummaryList({
        classes: 'govuk-!-margin-bottom-9',
        rows: [
          {
            key: {
              text: "QTS"
            },
            value: {
              text: teacher.qts.status
            }
          },
          {
            key: {
              text: "Date awarded"
            },
            value: {
              text: teacher.qts.dateAwarded | date
            }
          },
          {
            key: {
              text: "Date partial QTS awarded"
            },
            value: {
              text: teacher.qts.datePartiallyAwarded | date
            }
          }
        ]
      }) }}

      <h2 class="govuk-heading-m">
        Early years teacher status (EYTS)
      </h2>

      {{ govukSummaryList({
        classes: 'govuk-!-margin-bottom-9',
        rows: [
          {
            key: {
              text: "EYTS"
            },
            value: {
              text: teacher.eyts.status
            }
          },
          {
            key: {
              text: "Date awarded"
            },
            value: {
              text: teacher.eyts.dateAwarded | date
            }
          }
        ]
      }) }}

      <h2 class="govuk-heading-m">
        Induction
      </h2>

      {{ govukSummaryList({
        classes: 'govuk-!-margin-bottom-9',
        rows: [
          {
            key: {
              text: "Induction status"
            },
            value: {
              text: teacher.induction.status
            }
          },
          {
            key: {
              text: "Reason for exemption"
            },
            value: {
              text: teacher.induction.reasonForExemption
            }
          },
          {
            key: {
              text: "Are they eligible to complete a one-year induction period?"
            },
            value: {
              text: teacher.induction.eligibleToCompleteOneYearInduction
            }
          },
          {
            key: {
              text: "Date completed"
            },
            value: {
              text: teacher.induction.dateCompleted | date
            }
          }
        ]
      }) }}

      <h2 class="govuk-heading-m">
        Initial teacher training (ITT)
      </h2>
      {{ govukSummaryList({
        classes: 'govuk-!-margin-bottom-9',
        rows: [
          {
            key: {
              text: "Qualification"
            },
            value: {
              text: teacher.itt.qualification
            }
          },
          {
            key: {
              text: "ITT provider"
            },
            value: {
              text: teacher.itt.provider
            }
          },
          {
            key: {
              text: "Programme type"
            },
            value: {
              text: teacher.itt.programmeType
            }
          },
          {
            key: {
              text: "Subject"
            },
            value: {
              text: teacher.itt.subject
            }
          },
          {
            key: {
              text: "Additional subjects"
            },
            value: {
              text: teacher.itt.additionalSubject
            }
          },
          {
            key: {
              text: "Age range"
            },
            value: {
              text: teacher.itt.ageRange
            }
          },
          {
            key: {
              text: "Course end date"
            },
            value: {
              text: teacher.itt.dateCourseEnds | date
            }
          },
          {
            key: {
              text: "Course result"
            },
            value: {
              text: teacher.itt.result
            }
          },
          {
            key: {
              text: "Grade"
            },
            value: {
              text: teacher.itt.grade
            }
          }
        ]
      }) }}

      <h2 class="govuk-heading-m">
        Mandatory qualifications (MQs)
      </h2>

      {{ govukSummaryList({
        classes: 'govuk-!-margin-bottom-9',
        rows: [
          {
            key: {
              text: "MQ specialism"
            },
            value: {
              text: teacher.mq.specialism
            }
          },
          {
            key: {
              text: "Date awarded"
            },
            value: {
              text: teacher.mq.dateAwarded | date
            }
          }
        ]
      })}}

      <h2 class="govuk-heading-m">
        National professional qualifications (NPQs)
      </h2>

      {{ govukSummaryList({
        classes: 'govuk-!-margin-bottom-9',
        rows: [
          {
            key: {
              text: "Date NPQ for executive leadership awarded"
            },
            value: {
              text: teacher.npq.dateExecutiveLeadershipAwarded | date
            }
          },
          {
            key: {
              text: "Date NPQ for headship awarded"
            },
            value: {
              text: teacher.npq.dateHeadshipAwarded | date
            }
          },
          {
            key: {
              text: "Date NPQ for senior leadership awarded"
            },
            value: {
              text: teacher.npq.dateExecutiveLeadershipAwarded | date
            }
          },
          {
            key: {
              text: "Date NPQ for middle leadership awarded"
            },
            value: {
              text: teacher.npq.dateMiddleLeadershipAwarded | date
            }
          },
          {
            key: {
              text: "Date NPQ for leading teacher development awarded"
            },
            value: {
              text: teacher.npq.dateLeadingTeacherDevelopmentAwarded | date
            }
          },
          {
            key: {
              text: "Date NPQ for leading teaching awarded"
            },
            value: {
              text: teacher.npq.dateLeadingTeachingAwarded | date
            }
          },
          {
            key: {
              text: "Date NPQ for leading behaviour and culture awarded"
            },
            value: {
              text: teacher.npq.dateLeadingBehaviourAwarded | date
            }
          }
        ]
      }) }}
    </div>
  </div>
{% endblock %}
